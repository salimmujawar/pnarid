<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

if (!function_exists('getTime')) {

    function getTime() {
        $time = array('12:00 AM', '12:15 AM', '12:30 AM', '12:45 AM', '01:00 AM', '01:15 AM',
            '01:30 AM', '01:45 AM', '02:00 AM', '02:15 AM', '02:30 AM', '02:45 AM',
            '03:00 AM', '03:15 AM', '03:30 AM', '03:45 AM', '04:00 AM', '04:15 AM',
            '04:30 AM', '04:45 AM', '05:00 AM', '05:15 AM', '05:30 AM', '05:45 AM',
            '06:00 AM', '06:15 AM', '06:30 AM', '06:45 AM', '07:00 AM', '07:15 AM',
            '07:30 AM', '07:45 AM', '08:00 AM', '08:15 AM', '08:30 AM', '08:45 AM',
            '09:00 AM', '09:15 AM', '09:30 AM', '09:45 AM', '10:00 AM', '10:15 AM',
            '10:30 AM', '10:45 AM', '11:00 AM', '11:15 AM', '11:30 AM', '11:45 AM',
            '12:00 PM', '12:15 PM', '12:30 PM', '12:45 PM', '01:00 PM', '01:15 PM',
            '01:30 PM', '01:45 PM', '02:00 PM', '02:15 PM', '02:30 PM', '02:45 PM',
            '03:00 PM', '03:15 PM', '03:30 PM', '03:45 PM', '04:00 PM', '04:15 PM',
            '04:30 PM', '04:45 PM', '05:00 PM', '05:15 PM', '05:30 PM', '05:45 PM',
            '06:00 PM', '06:15 PM', '06:30 PM', '06:45 PM', '07:00 PM', '07:15 PM',
            '07:30 PM', '07:45 PM', '08:00 PM', '08:15 PM', '08:30 PM', '08:45 PM',
            '09:00 PM', '09:15 PM', '09:30 PM', '09:45 PM', '10:00 PM', '10:15 PM',
            '10:30 PM', '10:45 PM', '11:00 PM', '11:15 PM', '11:30 PM', '11:45 PM');
        return $time;
    }

}
if (!function_exists('tcpdf')) {

    function tcpdf() {
        require_once('tcpdf/config/lang/eng.php');
        require_once('tcpdf/tcpdf.php');
    }

}

if (!function_exists('isLogin')) {

    function isLogin() {
        $user = new stdClass();
        $CI = get_instance();
        $CI->load->library(array('ion_auth', 'form_validation'));
        if ($CI->ion_auth->logged_in()) {
            $user = $CI->ion_auth->user()->row();
        }
        return $user;
    }

}

if (!function_exists('number_days')) {

    function number_days($startDate, $endDate) {
        $startTimeStamp = strtotime($startDate);
        $endTimeStamp = strtotime($endDate);
        $timeDiff = abs($endTimeStamp - $startTimeStamp);
        $numberDays = $timeDiff / 86400;  // 86400 seconds in one day
        // and you might want to convert to integer
        $numberDays = intval($numberDays);
        return $numberDays;
    }

}
if (!function_exists('getGroup')) {

    function getGroup($user_id) {
        $group_id = 0;
        $CI = get_instance();
        $CI->load->library(array('ion_auth'));
        if ($CI->ion_auth->logged_in()) {
            $user_groups = $CI->ion_auth->get_users_groups($user_id)->row();
            $group_id = $user_groups->id;
        }
        return $group_id;
    }

}

/* :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: */
/* ::                                                                         : */
/* ::  This routine calculates the distance between two points (given the     : */
/* ::  latitude/longitude of those points). It is being used to calculate     : */
/* ::  the distance between two locations using GeoDataSource(TM) Products    : */
/* ::                                                                         : */
/* ::  Definitions:                                                           : */
/* ::    South latitudes are negative, east longitudes are positive           : */
/* ::                                                                         : */
/* ::  Passed to function:                                                    : */
/* ::    lat1, lon1 = Latitude and Longitude of point 1 (in decimal degrees)  : */
/* ::    lat2, lon2 = Latitude and Longitude of point 2 (in decimal degrees)  : */
/* ::    unit = the unit you desire for results                               : */
/* ::           where: 'M' is statute miles (default)                         : */
/* ::                  'K' is kilometers                                      : */
/* ::                  'N' is nautical miles                                  : */
/* ::  Worldwide cities and other features databases with latitude longitude  : */
/* ::  are available at http://www.geodatasource.com                          : */
/* ::                                                                         : */
/* ::  For enquiries, please contact sales@geodatasource.com                  : */
/* ::                                                                         : */
/* ::  Official Web site: http://www.geodatasource.com                        : */
/* ::                                                                         : */
/* ::         GeoDataSource.com (C) All Rights Reserved 2015		   		     : */
/* ::                                                                         : */
/* :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: */
if (!function_exists('distance')) {

    function distance($lat1, $lon1, $lat2, $lon2, $unit) {

        $theta = $lon1 - $lon2;
        $dist = sin(deg2rad($lat1)) * sin(deg2rad($lat2)) + cos(deg2rad($lat1)) * cos(deg2rad($lat2)) * cos(deg2rad($theta));
        $dist = acos($dist);
        $dist = rad2deg($dist);
        $miles = $dist * 60 * 1.1515;
        $unit = strtoupper($unit);

        if ($unit == "K") {
            return ($miles * 1.609344);
        } else if ($unit == "N") {
            return ($miles * 0.8684);
        } else {
            return $miles;
        }
    }

}

/**
 * Function to calculate date or time difference.
 *
 * Function to calculate date or time difference. Returns an array or
 * false on error.
 *
 * @author       J de Silva                             <giddomains@gmail.com>
 * @copyright    Copyright &copy; 2005, J de Silva
 * @link         http://www.gidnetwork.com/b-16.html    Get the date / time difference with PHP
 * @param        string                                 $start
 * @param        string                                 $end
 * @return       array
 */
if (!function_exists('get_time_difference')) {

    function get_time_difference($start, $end) {
        $uts['start'] = strtotime($start);
        $uts['end'] = strtotime($end);
        if ($uts['start'] !== -1 && $uts['end'] !== -1) {
            if ($uts['end'] >= $uts['start']) {
                $diff = $uts['end'] - $uts['start'];
                if ($days = intval((floor($diff / 86400))))
                    $diff = $diff % 86400;
                if ($hours = intval((floor($diff / 3600))))
                    $diff = $diff % 3600;
                if ($minutes = intval((floor($diff / 60))))
                    $diff = $diff % 60;
                $diff = intval($diff);
                return( array('days' => $days, 'hours' => $hours, 'minutes' => $minutes, 'seconds' => $diff) );
            }
            else {
                trigger_error("Ending date/time is earlier than the start date/time", E_USER_WARNING);
            }
        } else {
            trigger_error("Invalid date/time data detected", E_USER_WARNING);
        }
        return( false );
    }

}
